<div class="top-container">

	 <!-- Nav bar -->
	<div class="fixed-top">
		<nav class="navbar-container navbar-expand-md">
			<div class="top-navbar-left">
				<div>
					<ul class="navbar-nav">
						<li class="nav-item nav-item-font py-2">
							<button class="nav-link nav-button text-white ml-1" (click)="switchHideMenu()"><i class="fa fa-bars"></i></button>
						</li>
						<li class="nav-item nav-item-font py-2 d-none d-md-block">
							<button class="nav-link nav-button text-white ml-1" (click)="toHome()"><i class="fa fa-home"></i></button>
						</li>
						<li class="nav-item nav-item-font py-2 nav-search d-none d-md-block">
							<span class="search_icon">
								<i class="fa text-white mr-2 fa-search"></i>
							</span>
							<form class="form-inline">
								<input class="form-control mr-sm-2" type="search" placeholder="Find">
							</form>
						</li>
					</ul>
					
				</div>
			</div>
			<ul class="navbar-nav top-navbar-right">
				<li class="nav-item nav-item-font py-2">
					<button class="nav-link nav-button top-right-part text-white mr-2" href="#"><i class="fa top-right-part fa-plus"></i> </button>
				</li>
				<li class="nav-item nav-item-font py-2 ">
					<button class="nav-link nav-button top-right-part text-white mr-2" href="#">
					<i class="fa top-right-part fa-line-chart" id="status"></i></button>
				</li>
				<li class="nav-item nav-item-font py-2 ">
					<button class="nav-link nav-button top-right-part text-white mr-2" href="#"><i class="fa top-right-part fa-bell"></i> </button>
				</li>
				<li class="nav-item nav-item-font py-2 ">
					<button class="nav-link nav-button top-right-part text-white mr-2" href="#"><i class="fa top-right-part fa-cog"></i></button>
				</li>
			</ul>
		</nav>
	</div>

	<!-- Left navigation -->
	<div class="container-fluid">
		<div class="row-container">
			<div class="left-nav-container" [class.visibleLeftNav]="!hideMenu" [class.hiddenLeftNav]="hideMenu">
				<div class="left-nav">
						<ul class="top_filters">
							<li class="filter" id="filter_inbox">
								<span class="item_icon">
									<i class="fa text-primary mr-2 fa-inbox"></i>
								</span>
								<span class="item_content">
									Inbox
									<small class="item_counter">{{ tree.getNumOfUncompletedTasksInInbox() }}</small>
								</span>
							</li>
							<li class="filter" id="filter_today">
								<span class="item_icon">
									<i class="fa mr-2 text-success fa-calendar-minus-o"></i>
								</span>
								<span class="item_content">
									Today
									<small class="item_counter">{{ tree.getNumOfUncompletedTasksToday() }}</small>
								</span>
							</li>
							<li class="filter" id="filter_today">
								<span class="item_icon">
									<i class="fa text-warning mr-2 fa-calendar"></i>
								</span>
								<span class="item_content">
									Upcoming
								</span>
							</li>
						</ul>


						<div class="expansion_panel">
							<div class="expansion_panel__header" style="top: 372px;">
								<button type="button" class="expansion_panel__toggle" (click)="switchProjectCollapse()">
									<div class="expansion_panel__toggle_icon">
										<i class="fa mx-2 text-muted fa-chevron-right"  [class.rotated]="!collapseProjects"></i>
									</div>
									Projects
								</button>
								<div class="expansion_panel__actions">
									<button type="button" class="adder_icon" (click)="openProjectModal()">
										<i class="fa fa-plus"></i>
									</button>
								</div>
							</div>
							<div class="projects" style="min-height: 0px;" [class.hidden]="collapseProjects">
								<div class="projects_list_container">
									<ul class="items generic_left_list projects_list">
										<li class="project_list_item" *ngFor="let project of tree.projects" [class.hiddenProject]="isParentCollapsed(project.parentList)">
											<span class="indent" *ngFor="let e of [].constructor(project.indent)"></span>
											<button type="button" class="arrow" *ngIf="project.hasChildren" (click)="collapseProject(project.id)">
												<i class="fa mx-2 fa-chevron-right"   [class.rotated]="!isProjectCollapsed(project.id)"></i>
											</button>
											<button class="text" (click)="toProject(project.id)">
												<div class="div-color" [style]="'color: ' + project.color +';'"></div>
												{{project.name}}
												<div class="counter_count">{{tree.getNumOfUncompletedTasksByProject(project.id)}}</div>
											</button>
											
											<button type="button" #contextMenuButton class="icon_more" (click)="openContextProjectMenu($event, project.id)">
												<i class="fa fa-ellipsis-h"></i>
											</button>
										</li>
									</ul>
									<button type="button" class="plus_add_button" (click)="openProjectModal()">
										<span class="icon_add">
											<i class="fa fa-plus"></i>
										</span>
										Add project
									</button>
								</div>
							</div>
						</div>

						<div class="expansion_panel">
							<div class="expansion_panel__header" style="top: 372px;">
								<button type="button" class="expansion_panel__toggle" (click)="switchFilterCollapse()">
									<div class="expansion_panel__toggle_icon">
										<i class="fa mx-2 text-muted fa-chevron-right"  [class.rotated]="!collapseFilters"></i>
									</div>
									Filters
								</button>
								<div class="expansion_panel__actions">
									<button type="button" class="adder_icon">
										<i class="fa fa-plus"></i>
									</button>
								</div>
							</div>
						</div>

						<div class="expansion_panel">
							<div class="expansion_panel__header" style="top: 372px;">
								<button type="button" class="expansion_panel__toggle" (click)="switchLabelCollapse()">
									<div class="expansion_panel__toggle_icon">
										<i class="fa mx-2 text-muted fa-chevron-right"  [class.rotated]="!collapseLabels"></i>
									</div>
									Labels
								</button>
								<div class="expansion_panel__actions">
									<button type="button" class="adder_icon">
										<i class="fa fa-plus"></i>
									</button>
								</div>
							</div>
						</div>
					
				</div>
			</div>
			<div class="main-container">
				<div class="tab-content">
					<router-outlet></router-outlet>
				</div>
			</div>
		</div>

	</div>

</div>


<div class="modal"
  tabindex="-1"
  role="dialog"
  [ngStyle]="{'display':displayAddProject}">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Add Project</h4>
        <i class="fa fa-question fa-circle"></i>
      </div>
      <div class="modal-body">
        <form class="form" [formGroup]="addProjForm">
            <div class="form-field">
                <label for="projectName">Name</label>
                <input class="form-control mr-sm-2" placeholder="" id="name" formControlName="name">
            </div>

            <div class="form-field">
                <label for="projectColor">Color</label>
                <input class="form-control mr-sm-2" placeholder="" id="color" formControlName="color">
            </div>

            <div class="form-field-inline">
                <div class="switch" [class.switch-checked]="projectFav" (click)="switchProjectFav()">
                    <span class="switch-handle"></span>
                </div>
                <label>
                    Add to favorites
                </label>
            </div>
        </form>
  
      </div>
      <div class="modal-footer">
        <button type="button" class="modal-button" 
                (click)="closeProjectModal()">
          Cancel
        </button>
        <button type="button" class="modal-button modal-button-red" 
                (click)="addProjectModal()" [disabled]="addProjForm.invalid">
          Add
        </button>
      </div>
    </div>
  </div>
</div>


<div class="ist-menu context" [class.hidden-context-menu]="!showContextProjectMenu" [ngStyle]="{'left.px': projectContextMenuX, 'top.px': projectContextMenuY}">
	<ul class="context-menu-project" #projectContext>
		<li class="context-menu-project-item">
			<button (click)="openProjectModalAbove()">
				<span class="menu_icon">
					<i class="fa fa-arrow-up"></i>
				</span>
				<div class="menu_label">Add project above</div>
			</button>
		</li>
		<li class="context-menu-project-item">
			<button (click)="openProjectModalBelow()">
				<span class="menu_icon">
					<i class="fa fa-arrow-down"></i>
				</span>
				<div class="menu_label">Add project below</div>
			</button>
		</li>
		<li class="context-menu-project-item">
			<span class="menu_icon">
				<i class="fa fa-edit"></i>
			</span>
			<div class="menu_label">Edit project</div>
		</li>
		<li class="context-menu-project-item">
			<span class="menu_icon" *ngIf="contextProjectMenu">
				<i class="fa fa-heart-o" *ngIf="!contextProjectMenu.favorite"></i>
				<i class="fa fa-heart" *ngIf="contextProjectMenu.favorite"></i>
			</span>
			<div class="menu_label">Add to favorites</div>
		</li>
		<li class="context-menu-project-item">
			<span class="menu_icon">
				<i class="fa fa-clone"></i>
			</span>
			<div class="menu_label">Duplicate</div>
		</li>
		<li class="context-menu-project-item">
			<button (click)="deleteProject()">
				<span class="menu_icon">
					<i class="fa fa-trash"></i>
				</span>
				<div class="menu_label">Delete project</div>
			</button>
		</li>
	</ul>
</div>